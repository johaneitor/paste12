<!doctype html>
<html lang="es">
<head>
  <meta name="google-adsense-account" content="ca-pub-9479870293204581">

  <link rel="canonical" href="https://paste12-rmsk.onrender.com/">

  <meta property="og:type" content="website">

  <meta property="og:description" content="Notas r√°pidas con likes, vistas y expiraci√≥n autom√°tica.">

  <meta property="og:title" content="Paste12">

  <meta name="description" content="Paste12: notas r√°pidas con enlaces para compartir, likes, vistas y caducidad autom√°tica. Ligero, privado y sin cuentas.">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Paste12</title>
  <style>
    /* CSS principal, copiado del dise√±o original (ajustado) */
    .brand{margin:0; font-size:clamp(22px,3.4vw,30px)}
    .tagline{margin:6px 0 0; font-size:14px; color:#17323a; font-weight:600; opacity:.9}
    :root{
      --bg:#fffdfc; --fg:#24323f; --muted:#6b7a86;
      --teal:#8fd3d0; --peach:#ffb38a; --pink:#f9a3c7;
      --card:#ffffff; --ring: rgba(36,50,63,15);
    }
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:linear-gradient(180deg,var(--bg),#fff); color:var(--fg);
    }
    header{
      position:sticky; top:0; z-index:10;
      background:linear-gradient(90deg,var(--teal),var(--peach),var(--pink));
      color:#17323a; padding:16px 20px; box-shadow:0 2px 12px var(--ring);
    }
    h1{margin:0; font-size:clamp(20px,3.2vw,28px)}
    .container{max-width:860px; margin:20px auto; padding:0 16px}
    .card{
      background:var(--card); border:1px solid #eee; border-radius:16px;
      padding:14px; box-shadow:0 4px 20px var(--ring);
    }
    textarea,input[type="text"]{
      width:100%; padding:12px 14px;
      border-radius:12px; border:1px solid #e6eef2; font-size:16px;
      background:#fff; color:var(--fg);
    }
    textarea:focus,input:focus{
      border-color:#b5dfe0; box-shadow:0 0 0 4px rgba(143,211,208,25);
    }
    .row{display:flex; gap:10px; margin-top:10px}
    .btn{
      appearance:none; border:0; border-radius:12px; padding:12px 16px; font-weight:600; cursor:pointer;
      background:linear-gradient(90deg,var(--teal),var(--peach));
      color:#14333a; box-shadow:0 6px 18px var(--ring);
    }
    .btn:active{transform:translateY(1px)}
    .list{margin-top:18px; display:grid; gap:12px}
    .note{
      background:#fff; border:1px solid #eef2f5; border-radius:14px; padding:12px 14px;
    }
    .meta{
      color:var(--muted); font-size:13px; margin-top:6px;
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    .meta .act{
      border:0; background:transparent; color:inherit; cursor:pointer; padding:0 6px; border-radius:8px;
    }
    .meta .act:hover{ background:rgba(0,0,0,05) }
    .menu{margin-top:8px; display:flex; gap:8px;}
    .hidden{display:none}
    .error{color:#9a2b2b; margin-top:8px}
    .ok{color:#0a6f57; margin-top:8px}
    footer{
      margin:40px 0 28px; color:var(--muted); text-align:center; font-size:14px;
    }
    footer a{ color:#0b7c8a; text-decoration:underline }
  </style>
  <meta name="p12-commit" content="a528d851973c3d086a65bb8e1e374d4f1de6f1ec">
  <meta name="p12-built-at" content="20250924-022113Z">

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9479870293204581" crossorigin="anonymous"></script>
<meta name="robots" content="index,follow">
</head>
<body>
<h1 class="brand">Paste12</h1>
  <header>
  </header>
  <main class="container">
    <section class="card">
      <label for="text" style="font-weight:600;">Escribe tu nota‚Ä¶</label>
      <textarea id="text" rows="3" placeholder="Escribe tu nota‚Ä¶"></textarea>
      <div class="row">
        <input id="ttl" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="Horas (12 por defecto)">
        <button id="send" class="btn">Publicar</button>
      </div>
      <div id="msg" class="hidden"></div>
    </section>
    <section class="list" id="list"></section>
    <footer>
      <span>Usamos cookies/localStorage (e.g. para contar vistas).</span><br>
      <a href="/terms">T√©rminos y Condiciones</a> ¬∑ <a href="/privacy">Pol√≠tica de Privacidad</a>
    </footer>
  <section id="p12-stats" class="stats" style="margin-top:1rem;opacity:.88">
  <span class="views">0</span> views ¬∑
  <span class="likes">0</span> likes ¬∑
  <span class="reports">0</span> reports
</section>
</main>
  <script>
    /* L√≥gica JavaScript: carga de notas, manejo de ‚Äúme gusta‚Äù, compartir, reportar, paginaci√≥n, etc. */
    const FEED_SEL = "#list";
    let FEED = document.querySelector(FEED_SEL);
    if(!FEED){
      FEED = document.createElement("section");
      FEED.id = "list";
      (document.body||document.documentElement).appendChild(FEED);
    }
    function flash(ok,msg){
      let el = document.getElementById("msg");
      if(!el){
        el = document.createElement("div");
        el.id = "msg";
        (document.body||document.documentElement).prepend(el);
      }
      el.className = ok ? "ok" : "error";
      el.textContent = msg;
      setTimeout(()=>{ el.className="hidden"; el.textContent=""; }, 2200);
    }
    function cardHTML(it){
      const txt = it.text||it.content||it.summary||"";
      let short = txt, needMore=false;
      if(txt.length>180){ short = txt.slice(0,160)+"‚Ä¶"; needMore=true; }
      // Escapar caracteres HTML b√°sicos
      const esc = s=> (s||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
      return `
<article class="note" data-id="${it.id}">
  <div data-text="1" data-full="${esc(txt)}">${esc(short)||"(sin texto)"}</div>
  <div class="meta">#${it.id} ¬∑ ‚ù§ ${it.likes||0} ¬∑ üëÅ ${it.views||0}
    <button class="act like"  type="button">‚ù§</button>
    <button class="act more"  type="button">‚ãØ</button>
  </div>
  <div class="menu hidden">
    ${needMore?`<button class="expand" type="button">Ver m√°s</button>`:""}
    <button class="share"  type="button">Compartir</button>
    <button class="report" type="button">Reportar üö©</button>
  </div>
</article>`;
    }
    function appendItems(items){
      if(!items || !items.length) return;
      const div = document.createElement("div");
      div.innerHTML = items.map(cardHTML).join("");
      FEED.append(...div.children);
    }
    // Manejo de clics global (me gusta, m√°s opciones, compartir, reportar, expandir)
    window.addEventListener("click", async function(e){
      const art = e.target.closest("article.note");
      if(!art) return;
      const id = art.getAttribute("data-id");
      const like = e.target.closest("button.like");
      const more = e.target.closest("button.more");
      const share = e.target.closest("button.share");
      const rpt   = e.target.closest("button.report");
      const exp   = e.target.closest("button.expand");
      try {
        if(like){
          const r = await fetch(`/api/notes/${id}/like`, {method:"POST", credentials:"include"});
          const j = await r.json().catch(()=>({}));
          if(j && typeof j.likes !== "undefined"){
            const m = art.querySelector(".meta");
            if(m) m.innerHTML = m.innerHTML.replace(/‚ù§\s*\d+/, '‚ù§ '+j.likes);
          }
        } else if(more){
          art.querySelector(".menu").classList.toggle("hidden");
        } else if(share){
          const url = `${location.origin}/?id=${id}`;
          if(navigator.share){
            await navigator.share({title:`Nota #${id}`, url});
          } else {
            await navigator.clipboard.writeText(url);
            flash(true,"Link copiado");
          }
          art.querySelector(".menu").classList.add("hidden");
        } else if(rpt){
          const r = await fetch(`/api/notes/${id}/report`, {method:"POST", credentials:"include"});
          const j = await r.json().catch(()=>({}));
          if(j && j.removed){
            art.remove(); flash(true,"Nota eliminada");
          } else {
            flash(true,"Reporte enviado");
          }
          art.querySelector(".menu").classList.add("hidden");
        } else if(exp){
          const box = art.querySelector("[data-text]");
          if(!box) return;
          const full = box.getAttribute("data-full")||"";
          const expanded = exp.getAttribute("data-expanded")==="1";
          if(expanded){
            box.textContent = full.length>180? full.slice(0,160)+"‚Ä¶" : full;
            exp.textContent = "Ver m√°s";
            exp.setAttribute("data-expanded","0");
          } else {
            box.textContent = full;
            exp.textContent = "Ver menos";
            exp.setAttribute("data-expanded","1");
          }
        }
      } catch(_){ }
    });
    // Publicar nota (env√≠o POST, con fallback a form si es necesario)
    async function publish(ev){
      ev && ev.preventDefault && ev.preventDefault();
      const ta = document.querySelector("#text");
      const ttl = document.querySelector("#ttl");
      const text = (ta?.value||"").trim();
      if(text.length < 12){ flash(false,"Escrib√≠ un poco m√°s (‚â• 12 caracteres)."); return; }
      const body = { text };
      const v = parseInt(ttl?.value||"",10);
      if(Number.isFinite(v) && v>0) body.ttl_hours = v;
      // Intentar JSON primero
      let r, j;
      try {
        r = await fetch('/api/notes', {
          method:'POST', credentials:'include',
          headers:{'Content-Type':'application/json','Accept':'application/json'},
          body: JSON.stringify(body)
        });
      } catch(_){}
      if(!r || !r.ok){
        // Fallback: enviar como formulario x-www-form-urlencoded
        const params = new URLSearchParams();
        params.set('text', text);
        if(body.ttl_hours) params.set('ttl_hours', String(body.ttl_hours));
        try {
          r = await fetch('/api/notes', {
            method:'POST', credentials:'include',
            headers:{'Content-Type':'application/x-www-form-urlencoded','Accept':'application/json'},
            body: params
          });
        } catch(_){}
      }
      try { j = await r.json(); } catch(_){ j = null; }
      if(!r || !r.ok || !j || j.ok===false){
        flash(false, (j&&j.error) || (`Error HTTP ${(r&&r.status)}`));
        return;
      }
      // Prepend nueva nota publicada
      const it = j.item || {id:j.id, text, likes:j.likes||0, views:0, timestamp:new Date().toISOString()};
      const wrap = document.createElement('div');
      wrap.innerHTML = cardHTML(it);
      FEED.prepend(wrap.firstElementChild);
      if(ta) ta.value='';
      if(ttl) ttl.value='';
      flash(true,"Publicado ‚úÖ");
    }
    document.addEventListener("DOMContentLoaded", ()=>{
      const btn = document.getElementById("send");
      if(btn) btn.addEventListener("click", publish);
    });
    // Paginaci√≥n por keyset (cargar m√°s notas)
    async function fetchPage(url){
      let nextURL = null;
      try {
        const r = await fetch(url, {headers:{"Accept":"application/json"}, credentials:"include"});
        const j = await r.json().catch(()=>({}));
        const items = (Array.isArray(j) ? j : (j.items||[]));
        appendItems(items);
        // Verificar cabeceras Link o X-Next-Cursor para pr√≥xima p√°gina
        const link = r.headers.get("Link") || r.headers.get("link");
        if(link){
          const m = /<([^>]+)>;\s*rel="?next"?/i.exec(link);
          if(m) nextURL = m[1];
        }
        if(!nextURL){
          try {
            const xn = JSON.parse(r.headers.get("X-Next-Cursor")||"null");
            if(xn && xn.cursor_ts && xn.cursor_id){
              nextURL = `/api/notes?cursor_ts=${encodeURIComponent(xn.cursor_ts)}&cursor_id=${xn.cursor_id}`;
            }
          } catch(_){}
        }
        // Mostrar bot√≥n "Cargar m√°s" si hay siguiente
        if(nextURL){
          let b = document.getElementById("p12-more");
          if(!b){
            b = document.createElement("button");
            b.id = "p12-more"; b.type = "button"; b.textContent = "Cargar m√°s";
            b.style.cssText = "display:block;margin:12px auto;padding:.6rem 1rem;border-radius:999px;border:1px solid #e5e7eb;background:#fff;";
            FEED.after(b);
            b.addEventListener("click", ()=>{ fetchPage(nextURL); });
          }
        }
      } catch(_){}
    }
    // Iniciar cargando primeras notas
    window.addEventListener("DOMContentLoaded", ()=>{
      fetchPage('/api/notes?limit=10');
    });
  </script>

<!-- hotfix v5 America/Argentina/Buenos_Aires -->
</body>
</html>